---
title: Ubuntu输入法Bug及解决过程
date: 2019-01-30 15:40:08
top:
mathjax: false
category:
  - 手工实践
tags: Bug解决
comments: true
---

最近笔者的笔记本电脑上的Ubuntu系统的输入法出现问题，最终（可能不是永久性的）解决 Bug，将过程记录如下。

<!-- more -->

#### 环境

系统：Ubuntu 18.04 LTS

输入法：系统自带的 iBus 输入法

#### Bug 描述

Bug 是突然出现的，描述如下：

1. 一开始可以切换中英文，到后来中英文无法用键盘快捷键切换，再后来甚至无法用鼠标切换，顶栏一直显示 “中” ；
2. Bug 最主要的问题和特征就是，中文输入不再可用，英文输入正常；
3. 开始的时候，重启可以解决问题，但是重启后一段时间（中途对系统进行了太多操作，难以记录）后 Bug 继续出现，后来严重之时，重启也无法缓解；但是有时侯，该问题会消失几分钟；
4. 系统偶尔会报错：提示出现内部错误：gkbd-keyboard-display:11:get_preferred_height_for_width() 与出现的 bug 也相关；
5. 后来在网上搜索之后发现，这个 bug 有一定的触发条件，就是：在输入法偶尔可用的时候，使用中文输入，用数字键选择候选字词就会触发——于是在自己电脑上，趁输入法有一次偶尔可用的时候，试了一下果然如此；

#### 解决过程

1. 使用报错信息在百度和google镜像上搜索，有相关的英文网页，然而看不懂；
2. 转换关键词搜索，在网上找到网页http://forum.ubuntu.org.cn/viewtopic.php?t=487280，发现其问题描述和笔者遇到的问题如出一辙，按照其指示最终解决问题；

#### 解决方法

将目录 `～/.cache/ibus/libpinyin` 删除后重启电脑，问题得到解决. 

